# AI 辅助实验室设计器 v2 设计方案

> 设计日期：2025-01-02
> 设计目标：智能化交互 + 多学科支持 + 用户体验全面优化

---

## 一、设计背景

### 1.1 当前状态

现有 AI 辅助实验室设计器功能丰富，包含：
- 2D 画布编辑 + 3D 预览
- 7 个 AI 代理（布局、安全、预算、情绪设计等）
- 多维评估（Allen 曲线、心理安全、安全合规）
- 模板库、设备库、测量工具

### 1.2 核心问题

| 问题 | 描述 |
|------|------|
| 上手门槛高 | 功能太多，新用户不知从何开始 |
| 操作步骤繁琐 | 完成一个设计需要太多点击和切换 |
| AI 交互不够直观 | 不知道怎么跟 AI 对话、AI 建议不够精准 |
| 缺乏引导流程 | 没有分步向导，用户容易迷失 |
| 学科支持有限 | 主要面向通用创客空间，缺乏专业实验室支持 |

---

## 二、整体架构

### 2.1 AI 原生设计助手模式

将"功能堆叠"重构为"AI 原生设计助手"：

```
┌─────────────────────────────────────────────────────────────┐
│                    OWL 空间设计器 v2                         │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────┐   │
│  │  🎯 智能入口层                                        │   │
│  │  "50平米生物实验室，预算20万，支持基因编辑研究"        │   │
│  │  ↓ 一句话 → AI 理解 → 多方案生成                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                           ↓                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐                  │
│  │ 方案 A   │  │ 方案 B   │  │ 方案 C   │  ← 平行宇宙     │
│  │ 紧凑高效 │  │ 协作优先 │  │ 安全至上 │                  │
│  └──────────┘  └──────────┘  └──────────┘                  │
│                           ↓                                 │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  🔧 交互设计层                                        │   │
│  │  2D画布 + 3D预览 + AI实时建议侧边栏                   │   │
│  └─────────────────────────────────────────────────────┘   │
│                           ↓                                 │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📊 评估分析层                                        │   │
│  │  安全 | 协作效率 | 成本 | 合规 | 学科适配度           │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 三层架构职责

| 层级 | 职责 | 用户价值 |
|------|------|----------|
| **智能入口层** | 自然语言理解、需求拆解、多方案生成 | 零门槛启动 |
| **交互设计层** | 可视化编辑、AI 实时辅助、一键操作 | 高效设计 |
| **评估分析层** | 多维度自动评估、优化建议、合规检查 | 专业保障 |

---

## 三、智能入口与 AI 交互

### 3.1 智能启动体验

取代传统空白画布：

```
┌─────────────────────────────────────────────────────────────┐
│  🦉 你好！我是 OWL 空间设计助手                              │
│                                                             │
│  告诉我你想设计什么样的空间：                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 💬 "80平米的机器人创客空间，面向中学生，预算15万..."   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  或者选择快速开始：                                          │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐              │
│  │🧬 生物 │ │⚗️ 化学 │ │🤖 机器人│ │🎨 艺术 │ ...更多      │
│  └────────┘ └────────┘ └────────┘ └────────┘              │
│                                                             │
│  最近设计  |  模板库  |  从空白开始                          │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 AI 对话引导流程

当用户输入模糊需求时，AI 主动追问：

```
用户: "我想建一个实验室"

AI: 了解！让我帮你细化需求：

    📐 空间大小？
    ○ 小型 (30-50㎡)  ○ 中型 (50-100㎡)  ○ 大型 (100-200㎡)

用户: 中型

AI: 好的，主要用于什么学科/活动？
    ○ 生命科学  ○ 物理化学  ○ 电子机器人  ○ 数字创意  ○ 综合创客

用户: 生命科学

AI: 生命科学实验室！需要支持哪些实验类型？（可多选）
    ☐ 基础生物观察  ☐ 微生物培养  ☐ 基因编辑/PCR
    ☐ 细胞培养      ☐ 组织解剖    ☐ 生态模拟

...3-5轮对话后...

AI: ✅ 需求确认完成！正在为你生成 3 个设计方案...
```

### 3.3 实时 AI 侧边助手

设计过程中，AI 助手始终在场：

```
┌─────────────────────────────┬──────────────────────────┐
│                             │  🦉 AI 助手              │
│                             │                          │
│      [ 2D 画布区域 ]         │  💡 发现可优化点：        │
│                             │                          │
│                             │  ⚠️ PCR区与培养区太近     │
│                             │  建议间距 ≥ 2m 避免污染   │
│                             │  [一键调整]              │
│                             │                          │
│                             │  ✨ 试试这个？            │
│                             │  "添加缓冲区隔离污染源"   │
│                             │  [应用] [忽略]           │
│                             │                          │
│                             │  💬 有问题随时问我...     │
└─────────────────────────────┴──────────────────────────┘
```

**AI 实时建议触发条件**：
- 检测到安全隐患 → 立即提示
- 区域布局不优 → 建议优化
- 成本超预算 → 推荐替代方案
- 学科规范冲突 → 合规提醒

---

## 四、五大学域模板体系

### 4.1 学域顶层分类

```
┌─────────────────────────────────────────────────────────────┐
│                    OWL 学域模板体系                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   🧬 生命健康        🚀 深空海地        🌍 社会创新          │
│   ───────────       ───────────       ───────────          │
│   生物医学           航天航空           教育创新             │
│   基因编辑           海洋科学           社会设计             │
│   脑科学             极地研究           可持续发展           │
│   合成生物           地球深部           社区营造             │
│   健康科技           环境监测           政策实验             │
│                                                             │
│   🔬 微纳界面        💻 数字信息        ➕ 自定义学域        │
│   ───────────       ───────────       ───────────          │
│   纳米材料           人工智能           [创建新学域]         │
│   量子科技           数据科学           [导入模板]           │
│   新能源             网络安全           [社区共享]           │
│   精密制造           人机交互                               │
│   界面科学           元宇宙/XR                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 开放扩展机制

| 扩展方式 | 说明 |
|---------|------|
| **自定义学域** | 用户可创建新学域，定义专属区域类型和设备库 |
| **模板导入** | 支持 JSON/YAML 格式导入外部模板 |
| **社区共享** | 用户可发布模板到社区，供他人使用 |
| **AI 学习** | AI 从用户设计中学习新学科模式 |

### 4.3 学域交叉支持

五大学域高度交叉，AI 自动识别跨学科需求：

```
用户输入: "我们要建一个模拟火星环境的实验室，研究植物在低压低温下的生长"

AI 识别:
├── 学科: 深空海地 > 天体生物学 + 生命健康 > 太空农业
├── 环境模拟: 低压(600Pa)、低温(-60~20℃)、CO2大气
├── 研究对象: 植物生理、闭环生态
├── 必需设备: 环境模拟舱、光照培养系统、气体分析仪
├── 特殊要求: 气密性、压力安全、应急泄压
└── 参考标准: NASA ECLSS、ESA MELiSSA
```

---

## 五、实际建设模式：三区组合

### 5.1 通用 + 专业 + 交流

学校/机构实际建设通常采用三区组合：

```
┌─────────────────────────────────────────────────────────────┐
│                 学校/机构实验室建设模式                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  🔧 通用实验室 (Flexible Lab)                        │   │
│  │  • 模块化工位，可快速重组                             │   │
│  │  • 基础设备共享（3D打印、激光切割、电子工具）          │   │
│  │  • 支持多学科临时性实验、教学、入门探索               │   │
│  └─────────────────────────────────────────────────────┘   │
│                           +                                 │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  🎯 专业前沿实验室 (Specialized Lab) - 主体           │   │
│  │  • 根据机构定位选择 1-2 个前沿方向                    │   │
│  │  • 专业设备、严格规范、深度研究                       │   │
│  │  • 五大学域中选择聚焦领域                            │   │
│  └─────────────────────────────────────────────────────┘   │
│                           +                                 │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  💬 讨论交流区 (Collaboration Zone)                   │   │
│  │  • 开放讨论空间、白板墙、投影展示                     │   │
│  │  • 跨学科碰撞、项目路演、导师答疑                     │   │
│  │  • 非正式交流区（咖啡角、休息区）                     │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 AI 引导选择

```
AI: 请选择专业实验室方向（1-2个）：

    ┌─────────────────────────────────────────────────┐
    │  五大学域，点选聚焦方向                          │
    │                                                 │
    │  🧬 生命健康    [合成生物] [脑科学] [健康科技]    │
    │  🚀 深空海地    [航天技术] [海洋科学] [极端环境]  │
    │  🌍 社会创新    [教育创新] [可持续] [社区设计]    │
    │  🔬 微纳界面    [纳米材料] [量子科技] [新能源]    │
    │  💻 数字信息    [人工智能] [数据科学] [元宇宙]    │
    │                                                 │
    │  已选: [合成生物 ✓] [人工智能 ✓]  (最多2个)     │
    └─────────────────────────────────────────────────┘
```

---

## 六、分阶段实施计划

### 6.1 整体路线图

```
Phase 1                Phase 2                Phase 3
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
智能入口重构            学科模板体系            AI 深度优化
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

• 一句话启动界面         • 五大学域模板库         • 实时智能建议
• AI 对话引导流程        • 通用+专业+交流三区     • 多方案对比优化
• 侧边 AI 助手          • 设备库扩展             • 学习用户习惯
• 简化工具栏            • 安全规范库             • 社区模板共享
```

### 6.2 Phase 1 核心改造

| 模块 | 当前问题 | 改造方向 |
|------|---------|---------|
| **启动页** | 空白画布 | 智能对话入口 + 快速选择卡片 |
| **工具栏** | 功能过多 | 精简为 3-5 个核心操作 |
| **AI 交互** | 需主动打开 | 常驻侧边栏，实时响应 |
| **操作流程** | 多步骤切换 | 单页面完成核心流程 |

### 6.3 技术改造清单 (Phase 1)

```
src/app/[locale]/lab/floor-plan/
├── page.tsx                    # 重构：智能启动 + 单页设计

src/components/lab/
├── SmartLauncher.tsx          # 新增：智能启动组件
├── AIConversationGuide.tsx    # 新增：对话引导流程
├── AISidebar.tsx              # 新增：常驻AI侧边栏
├── SimplifiedToolbar.tsx      # 新增：精简工具栏
└── FloorPlanCanvas.tsx        # 优化：接入实时AI建议

src/lib/ai/agents/
├── conversation-agent.ts      # 新增：对话理解代理
└── realtime-advisor-agent.ts  # 新增：实时建议代理
```

---

## 七、预期成果

### 7.1 用户体验提升

| 指标 | 当前 | 目标 |
|------|------|------|
| 首次使用完成设计 | 需要教程 | 3分钟内生成首个方案 |
| 完成一个设计的点击数 | 50+ | <20 |
| AI 建议采纳率 | 未知 | >60% |
| 用户满意度 | 未测量 | >4.5/5 |

### 7.2 学科覆盖

- 五大学域全覆盖：生命健康、深空海地、社会创新、微纳界面、数字信息
- 支持 1-2 个专业方向组合
- 开放扩展，不局限于预设学科

---

## 八、附录

### 8.1 学科模板数据结构

每个学科模板包含：

| 维度 | 内容 |
|------|------|
| **必需区域** | 该学科必备的功能区域 |
| **推荐设备** | 核心设备清单 |
| **安全规范** | 学科特定的安全要求 |
| **空间参数** | 最小面积、层高、温湿度等 |
| **布局规则** | 流线设计、分区原则 |
| **成本基准** | 预算参考范围 |

### 8.2 相关文档

- [OWL 创意工具箱设计](./2025-12-31-living-lab-tools-design.md)
- [现有平面图设计器文档](../README.md)

---

## 九、实施进度

### Phase 1: 智能入口重构 ✅ 已完成

| 任务 | 状态 | 提交 |
|------|------|------|
| SmartLauncher 组件 | ✅ 完成 | a5af80e |
| AISidebar 组件 | ✅ 完成 | 43fac8c |
| SimplifiedToolbar 组件 | ✅ 完成 | f41d04e |
| 页面集成 | ✅ 完成 | f243dcb |
| 国际化翻译 | ✅ 完成 | 3765b7f |

**实施日期：** 2025-01-02

**下一步：**
- [ ] AI 对话代理优化（接入真实 AI 理解用户需求）
- [ ] 学科模板数据（创建五大学域的基础模板）
- [ ] 实时建议引擎（基于布局分析提供更智能的建议）
